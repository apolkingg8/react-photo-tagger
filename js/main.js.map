{"version":3,"sources":["/Users/applesw2/Documents/Gits/MY/react-photo-tagger/js/main.jsx"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["import React from 'react'\nimport _ from 'underscore'\n\nvar Img = React.createClass({\n    render: function() {\n\n        var _style = {\n            width: '100%',\n            height: '100%'\n        };\n\n        return (\n            <img src={this.props['src']}\n                 style={_style}/>\n        )\n    }\n});\n\n\nvar ChoosingBox = React.createClass({\n\n    getInitialState: function() {\n        return {\n        }\n    },\n\n    setStyle: function() {\n        return {\n            position: 'absolute',\n            top: this.props['positionY'],\n            left: this.props['positionX'],\n            width: this.props['width'],\n            height: this.props['height'],\n            visibility: this.props['show'],\n            border: '2px solid #fff'\n        }\n    },\n\n    render: function() {\n        return (\n            <div style={this.setStyle()}>\n            </div>\n        )\n    }\n});\n\n\nvar Wrap = React.createClass({\n\n    getInitialState: function() {\n\n        return {\n            offsetTop: 0,\n            offsetLeft: 0,\n\n            mouseDownX: 0,\n            mouseDownY: 0,\n            mouseUpX: 0,\n            mouseUpY: 0,\n            mouseX: 0,\n            mouseY: 0,\n\n            choosingBoxShow: false,\n            choosingBoxWidth: 0,\n            choosingBoxHeight: 0,\n\n            dragging: false\n        };\n    },\n\n    _getRelativedX: function(e) {\n        return e.clientX - this.state.offsetLeft;\n    },\n\n    _getRelativedY: function(e) {\n        return e.clientY - this.state.offsetTop;\n    },\n\n    componentDidMount: function() {\n\n        this.setState({\n            offsetTop: this.getDOMNode().offsetTop,\n            offsetLeft: this.getDOMNode().offsetLeft\n        });\n    },\n\n    onMouseMoveHandler: function(e) {\n        var that = this;\n\n        var onMove = _.throttle(function(){\n            console.log('mouse move');\n\n            that.setState({\n                mouseX: that._getRelativedX(e),\n                mouseY: that._getRelativedY(e)\n            })\n        }, 100);\n\n        onMove();\n\n\n        if(this.state.dragging) {\n            _.throttle(function(){\n                console.log(that.state.mouseX, that.state.mouseY);\n\n                that.setState({\n                    choosingBoxWidth: that.state.mouseX - that.state.mouseDownX,\n                    choosingBoxHeight: that.state.mouseY - that.state.mouseDownY\n                });\n            }, 100);\n        }\n    },\n\n    onMouseDownHandler: function(e) {\n        e.preventDefault();\n        console.log('mouse down', e);\n\n        this.setState({\n            dragging : true,\n            mouseDownX : this._getRelativedX(e),\n            mouseDownY : this._getRelativedY(e)\n        });\n    },\n\n    onMouseUpHandler: function(e) {\n        console.log('mouse up', e);\n\n        this.setState({\n            dragging : false,\n            mouseUpX : this._getRelativedX(e),\n            mouseUpY : this._getRelativedY(e)\n        });\n    },\n\n    onMouseLeaveHandler: function(e) {\n        console.log('mouse leave', e);\n\n        this.setState({\n            dragging : false,\n            mouseUpX : this._getRelativedX(e),\n            mouseUpY : this._getRelativedY(e)\n        });\n    },\n\n    setStyle: function() {\n\n        return {\n            position: 'relative',\n            top: '20px',\n            width: this.props['width'] || '100%',\n            height: this.props['height'] || '100%'\n        };\n    },\n\n    render: function() {\n\n        console.log('render');\n\n        return (\n            <div className=\"react-photo-tagger-wrap\"\n                 onMouseDown={this.onMouseDownHandler}\n                 onMouseUp={this.onMouseUpHandler}\n                 onMouseMove={this.onMouseMoveHandler}\n                 style={this.setStyle()}>\n\n                <ChoosingBox\n                    positionX={this.state.mouseDownX}\n                    positionY={this.state.mouseDownY}\n                    width={this.state.choosingBoxWidth}\n                    height={this.state.choosingBoxHeight}\n                    show={this.state.choosingBoxShow}>\n                </ChoosingBox>\n\n                <Img src={this.props['imgSrc']}/>\n            </div>\n        )\n    }\n});\n\n\nReact.render(\n    <Wrap\n        imgSrc=\"test.jpeg\"\n        width=\"250px\"\n        height=\"200px\">\n    </Wrap>\n    , document.body);"]}